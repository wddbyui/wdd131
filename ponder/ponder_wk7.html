<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ponder - Unit4A - Week 7</title>
    <meta name="description" content="Curriculum for the BYUI WDD 131 course">
    <meta property="og:site_name" content="WDD 131 Dynamic Web Fundamentals">
    <meta property="og:title" content="JS">
    <meta property="og:description" content="Curriculum for the BYUI WDD 131 course">
    <meta property="og:url" content="https://wddbyui.github.io/wdd131/">
    <meta property="og:locale" content="en_us">
    <meta name="twitter:card" content="summary">
    <link rel="apple-touch-icon" sizes="157x157" href="images/apple-touch-icon.png">
    <link rel="icon" type="image/ico" href="../images/favicon.ico" sizes="32x32">
    <link rel="shortcut icon" href="../images/favicon.ico">
    <link rel="stylesheet" href="../css/main.css">
</head>
<body>
    <div class="wrapper">
    <header class="banner">
      <div class="banner-left">
        <span class="web">WEB</span>
        <div class="title">
          <div>DYNAMIC</div>
          <div>FUNDAMENTALS</div>
        </div>
      </div>
      <div class="banner-right">
        WDD 131
      </div>
    </header>
    <main>
      <div id="content">
        <h1>Ponder - Forms</h1>    
        <section class="accordion">
          <h2>
              <button type="button" aria-expanded="false" aria-controls="review-topics-content" id="review-topics-toggle" class="button">
                <span class="caret" aria-hidden="true">â–¶</span>
                Introduced Topics
              </button>
            </h2>
            <div id="review-topics-content" class="content" role="region" aria-labelledby="review-topics-toggle" hidden>
                <ul class="list">
                  <li>
                    <h2>favicon</h2>
                    <p>A favicon is a small image displayed next to the page title in the browser tab.</p>
                    <p>The image will be quite small and square. Size can range from 16x16 pixels to 64x64 pixels.</p>
                    <p>A common name for the favicon image is 'favicon.ico'.</p>
                    <pre>
                        <code class="code-block">
&lt;link rel=&quot;icon&quot; type=&quot;image/x-icon&quot; href=&quot;images/favicon.ico&quot;&gt;          
                        </code>
                    </pre>
                  </li>
                  <li>
                    <h2>.preventDefault()</h2>
                    <p>The .preventDefault() method used to stop the default behavior of an event from happening.</p>
                  </li>
                  <li>
                    <h2>.test()</h2>
                    <p>The .test() method is a method of regular expressions (RegExp) in JavaScript.
                    <p>It returns true if the string matches the pattern and false if it doesn't.</p>
                    <p>This example checks the input against a regular expression that the string contains exactly 16 digits and nothing else.</p>
                    <pre>
                        <code class="code-block">
if (!/^\d{16}$/.test(cardNum)) {
      errorMsg += 'Card number must be 16 digits\n';
}            
                        </code>
                    </pre>
                  </li>
                  <li>
                    <h2>.trim()</h2>
                    <p>The .trim() method is a string method in JavaScript that removes whitespace from both ends of a string</p>
                    <p>A user might inadvertently add spaces before and after an input entry. We want to eliminate these space.</p>
                    <p>This example is not only getting the input value the user entered, but also trimming any white spaces before and after the entry.</p>
                  </li>
                  <pre>
                        <code class="code-block">
const cardNum = cardNumber.value.trim();
                        </code>
                  </pre>
                </ul>
          </div>
        </section>
        <h2>Form Validation</h2>
        <p>This demonstrates the form:</p>
        <video controls>
          <source src="../videos/form-ponder.mp4" type="video/mp4">
          Your browser does not support the video tag.
        </video>
        <p>Depending on if the user pays by credit card or Paypal, a different sent of inputs are available.</p>
        <p>Validation is used to ensure the exact credit card number and that the card is not expired. Normally we would contact a credit card service to check a card number...but we don't know how to do that yet. So to keep things simple we will only accept one number</p>
        <h3>Practice Code</h3>
        <p>HTML:</p>
        <button  class="copy-button">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 24 24" style="vertical-align: middle; margin-right: 0.4em;">
  <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 18H8V7h11v16z"/>
          </svg>
          Copy Code
        </button>  
        <pre>
          <code class="code-block">
&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot; /&gt;
    &lt;title&gt;Checkout Form&lt;/title&gt;
    &lt;link rel=&quot;icon&quot; href=&quot;favicon.png&quot;&gt;
    &lt;link rel=&quot;stylesheet&quot; href=&quot;form.css&quot;/&gt;
    &lt;script src=&quot;form.js&quot; defer&gt;&lt;/script&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;header&gt;&lt;h1&gt;Checkout&lt;/h1&gt;&lt;/header&gt;
    &lt;main&gt;
      &lt;section class=&quot;errors&quot;&gt;&lt;/section&gt;
      &lt;form id=&quot;checkoutForm&quot; action=&quot;completed.html&quot; method=&quot;get&quot;&gt;
        &lt;label for=&quot;fullName&quot;&gt;Full Name:&lt;/label&gt;
        &lt;input type=&quot;text&quot; id=&quot;fullName&quot; name=&quot;fullName&quot; required&gt;
        &lt;label for=&quot;email&quot;&gt;Email:&lt;/label&gt;
        &lt;input type=&quot;email&quot; id=&quot;email&quot; name=&quot;email&quot; placeholder=&quot;email@email.com&quot; required&gt;
        &lt;label for=&quot;address&quot;&gt;Address:&lt;/label&gt;
        &lt;textarea id=&quot;address&quot; name=&quot;address&quot; rows=&quot;4&quot; required&gt;&lt;/textarea&gt;
        &lt;label for=&quot;paymentMethod&quot;&gt;Payment Method:&lt;/label&gt;
        &lt;select id=&quot;paymentMethod&quot; name=&quot;paymentMethod&quot; required aria-expanded=&quot;false&quot; aria-controls=&quot;creditCardnumberContainer paypalUsernameContainer&quot;&gt;
            &lt;option value=&quot;&quot;&gt;Select Payment Method&lt;/option&gt;
            &lt;option value=&quot;creditCard&quot;&gt;Credit Card&lt;/option&gt;
            &lt;option value=&quot;paypal&quot;&gt;PayPal&lt;/option&gt;
        &lt;/select&gt;

        &lt;!-- Container for credit card details --&gt;
        &lt;p id=&quot;creditCardNumberContainer&quot; class=&quot;hide&quot; role=&quot;region&quot; aria-labelledby=&quot;creditCardLabel&quot;&gt;
            &lt;label id=&quot;creditCardLabel&quot; for=&quot;creditCardNumber&quot;&gt;Credit Card Number:&lt;/label&gt;
            &lt;input
            type=&quot;text&quot;
            id=&quot;creditCardNumber&quot;
            name=&quot;creditCardNumber&quot;
            pattern=&quot;[0-9]{16}&quot;
            placeholder=&quot;Enter 16 digits&quot;
            required
            /&gt;
            &lt;label for=&quot;expirationDate&quot;&gt;Expiration&lt;/label&gt;
            &lt;input 
            type=&quot;text&quot; 
            id=&quot;month&quot; 
            name=&quot;expMonth&quot; 
            placeholder=&quot;MM&quot; 
            aria-labelledby=&quot;expirationDate&quot;&gt;
            &lt;input 
            type=&quot;text&quot; 
            id=&quot;year&quot; 
            name=&quot;expYear&quot; 
            placeholder=&quot;YY&quot; 
            aria-labelledby=&quot;expirationDate&quot;&gt;
        &lt;/p&gt;
      
        &lt;!-- Container for PayPal details --&gt;
        &lt;p id=&quot;paypalUsernameContainer&quot; class=&quot;hide&quot; role=&quot;region&quot; aria-labelledby=&quot;paypalLabel&quot;&gt;
            &lt;label id=&quot;paypalLabel&quot; for=&quot;paypalUsername&quot;&gt;PayPal Username:&lt;/label&gt;
            &lt;input
            type=&quot;text&quot;
            id=&quot;paypalUsername&quot;
            name=&quot;paypalUsername&quot;
            placeholder=&quot;Enter PayPal username&quot;
            required
            /&gt;
        &lt;/p&gt;

        &lt;button type=&quot;submit&quot;&gt;Place Order&lt;/button&gt;
      &lt;/form&gt;
    &lt;/main&gt;
  &lt;/body&gt;
&lt;/html&gt;
          </code>
        </pre>
        
        <p>JS:</p>
        <button  class="copy-button">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 24 24" style="vertical-align: middle; margin-right: 0.4em;">
  <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 18H8V7h11v16z"/>
          </svg>
          Copy Code
        </button>  
        <!-- HTML entity encoding -->
        <pre>
          <code class="code-block">
// get a reference to the form. We can access all the named form inputs through the form element.
    const theForm = document.querySelector('#checkoutForm');
    // target the drop down select for aria
    const paymentSelect = document.querySelector('#paymentMethod');
    // we will also need the creditCardContainer and paypalUsernameContainer
    const creditCardContainer = document.querySelector('#creditCardNumberContainer');
    const paypalContainer = document.querySelector('#paypalUsernameContainer');
    const creditInput = document.querySelector('#creditCardNumberContainer input');
    const paypalInput = document.querySelector('#paypalUsernameContainer input');
 
function togglePaymentDetails(e) {
    
    // Show the container based on the selected payment method, and add the required attribute back.
        let value = e.target.value; //theForm.paymentMethod.value
        paypalContainer.classList.add('hide');
        creditCardContainer.classList.add('hide');
        paypalInput.required=false;  //theForm.paypalUsername.required = false;
        creditInput.required=false;
      
        // hide and how selected payment type
        if (value == 'creditCard') {
          creditCardContainer.classList.remove('hide');
          creditInput.required=true;
          // paypalInput.disabled=true;
        } else if (value == 'paypal') {
          paypalContainer.classList.remove('hide');
          paypalInput.required=true;
          // creditInput.disabled=true;
        }

        // Update ARIA expanded attribute
        // aria-expanded belongs to the element that toggles visibility, not the hidden content itself.
        if (value === 'creditCard' || value === 'paypal') {
          paymentSelect.setAttribute("aria-expanded", "true");
        } else {
          paymentSelect.setAttribute("aria-expanded", "false");
        }
  }

// attach a change event handler to the paymentMethod input
const selectElement = document.getElementById("paymentMethod");

// attach a submit event handler to the form
selectElement.addEventListener('change', togglePaymentDetails);

//validations and errors

function displayError(msg) {
	// display error message
	document.querySelector('.errors').textContent = msg
}

function isCardNumberValid(number) {
	// normally we would contact a credit card service...but we don't know how to do that yet. So to keep things simple we will only accept one number
	return number === '1234123412341234'
}

function submitHandler(event) {
	event.preventDefault();
  let errorMsg = '';
	displayError('');

  let cardNumber = document.querySelector('#creditCardNumber');
  const cardNum = cardNumber.value.trim();
  if (paymentSelect.value === 'creditCard') {
    // Check if it's numeric and valid in one go
    
      if (!/^\d{16}$/.test(cardNum)) {
      errorMsg += 'Card number must be 16 digits\n';
      } else if (!isCardNumberValid(cardNum)) {
        errorMsg += 'Card number is not valid\n';
      }
    
    //check date
    const expYear = Number(document.querySelector('#year').value);   
    const expMonth = Number(document.querySelector('#month').value);
    const currentDate = new Date()

    if (2000 + expYear < currentDate.getFullYear() || (2000 + expYear === currentDate.getFullYear() && expMonth < (currentDate.getMonth() + 1))
    ) {
        errorMsg += 'Card is expired\n';
    }
  }

    if (errorMsg !== '') {
		// there was an error. stop the form and display the errors.
		displayError(errorMsg)
		return;
    }
    // Success: show a confirmation message
    const formContainer = document.getElementById('checkoutForm');
    formContainer.innerHTML = '<h2>Thank you for your purchase.</h2>';
  
}
  
document.querySelector('#checkoutForm').addEventListener('submit', submitHandler)
          </code>
        </pre>
        <p>CSS:</p>
        <button  class="copy-button">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" fill="currentColor" viewBox="0 0 24 24" style="vertical-align: middle; margin-right: 0.4em;">
  <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 18H8V7h11v16z"/>
          </svg>
          Copy Code
        </button>  
        <!-- HTML entity encoding -->
        <pre>
          <code class="code-block">
/* form-demo.css */
body {
  font-size: 1.2em;
}
form {
  width: 50%;
  margin: 0 auto;
}
h1 {
  text-align: center;
}
label {
    display: block;
    margin-bottom: 8px;
  }
  
  input,
  select,
  textarea {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    box-sizing: border-box;
    border: 1px solid #ccc; /* Add a border to make it visually consistent */
    border-radius: 4px;
  }
  button {
    background-color: #4caf50;
    color: white;
    padding: 10px 15px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }
  .errors {
    white-space: pre-line; /*needed for 2 errors to be on separate lines*/
    color: red;
  }
  .hide {
    display: none;
  }
          </code>
        </pre>
      </div>
    </main>
    <footer>
      <p>Brigham Young University - Idaho <span id="year"></span></p>
    </footer>
    </div>
    <script src="../js/scripts.js"></script>
</body>
</html>